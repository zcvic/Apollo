syntax = "proto2";

package apollo.hdmap;

import "modules/map/proto/map_geometry.proto";
import "modules/map/proto/map_id.proto";

enum BoundaryEdgeType {
  DEFAULT = 0;
  SURFACE = 1;
  CURB = 2;
  FENCE = 3;
  WALL = 4;
  SUNKEN = 5;
  PED_XING = 6;
  VIRTUAL = 7;
};

message BoundaryEdgeTypeInfo {
 optional double start_s = 1;
 optional double end_s = 2;
 repeated BoundaryEdgeType type = 3;
};

message BoundaryEdge {
 optional Curve curve = 1;

 enum Type {
   UNKNOWN = 0;
   NORMAL = 1;
   LEFT_BOUNDARY = 2;
   RIGHT_BOUNDARY = 3;
 };
 optional Type type = 2;
 
 repeated BoundaryEdgeTypeInfo edge_type_info = 3;
};

message BoundaryPolygon {
  repeated BoundaryEdge edge = 1;
}

// boundary with holes
message RoadBoundary {
  optional BoundaryPolygon outer_polygon = 1;
  // if boundary without hole, hole is null
  repeated BoundaryPolygon hole = 2;
}

message RoadROIBoundary {
  optional Id id = 1;
  repeated RoadBoundary road_boundaries = 2;
}

// road section defines a road cross-section, At least one section must be
// defined in order to
// use a road, If multiple road sections are defined, they must be listed in
// order along the road
message RoadSection {
  optional Id id = 1;
  // lanes contained in this section
  repeated Id lane_id = 2;
  // boundary of section
  optional RoadBoundary boundary = 3;
}

// The road is a collection of traffic elements, such as lanes, road boundary
// etc.
// It provides general information about the road.
message Road {
  optional Id id = 1;
  repeated RoadSection section = 2;

  // if lane road not in the junction, junction id is null.
  optional Id junction_id = 3;

  enum Type {
    UNKNOWN = 0;
    HIGHWAY = 1;
    CITY_ROAD = 2;
    PARK = 3;
  };
  optional Type type = 4;
}
